# ============================================
# ElohimOS Environment Configuration
# ============================================
# Copy this file to .env and customize for your deployment
# All settings can be overridden via environment variables with ELOHIMOS_ prefix
#
# Example: ELOHIMOS_JWT_SECRET_KEY=mysecret

# ============================================
# PLATFORM REQUIREMENTS
# ============================================
# ElohimOS is macOS-only and offline-first.
# - OS: macOS (Darwin) only
# - AI: Local Ollama (localhost:11434) - no cloud calls
# - Prerequisites: brew install ffmpeg python@3.11; install Ollama

# ============================================
# SYSTEM SETTINGS
# ============================================

# Application environment: development, production, or testing
# ELOHIMOS_ENVIRONMENT=development

# Enable debug mode (more verbose logging, stack traces in errors)
# ELOHIMOS_DEBUG=true

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# ELOHIMOS_LOG_LEVEL=INFO

# ============================================
# API SERVER SETTINGS
# ============================================

# API server host (use localhost for development, 0.0.0.0 for production)
# ELOHIMOS_API_HOST=localhost

# API server port
# ELOHIMOS_API_PORT=8000

# Number of API workers (Uvicorn)
# ELOHIMOS_API_WORKERS=1

# Allowed CORS origins (JSON array format)
# ELOHIMOS_CORS_ORIGINS=["http://localhost:4200","http://127.0.0.1:4200"]

# ============================================
# SECURITY SETTINGS
# ============================================

# JWT signing secret key
# ⚠️  CRITICAL: Change this in production! Use a long random string.
# Generate with: openssl rand -hex 32
# ELOHIMOS_JWT_SECRET_KEY=CHANGE_ME_IN_PRODUCTION_12345678901234567890

# JWT signing algorithm (HS256, HS512, RS256, etc.)
# ELOHIMOS_JWT_ALGORITHM=HS256

# Access token expiration in minutes (default: 43200 = 30 days)
# ELOHIMOS_JWT_ACCESS_TOKEN_EXPIRE_MINUTES=43200

# Session timeout in hours (default: 24 hours)
# ELOHIMOS_SESSION_TIMEOUT_HOURS=24

# Maximum failed login attempts before lockout
# ELOHIMOS_MAX_LOGIN_ATTEMPTS=5

# ============================================
# PATH CONFIGURATION
# ============================================

# Base data directory for all ElohimOS data
# Default: .neutron_data in project root
# ELOHIMOS_DATA_DIR=.neutron_data

# ============================================
# DATABASE SETTINGS
# ============================================

# Database operation timeout in seconds
# ELOHIMOS_DB_TIMEOUT=300

# Number of retries for failed DB operations
# ELOHIMOS_DB_RETRY_COUNT=3

# Delay between DB retries in seconds
# ELOHIMOS_DB_RETRY_DELAY=5

# ============================================
# OLLAMA SETTINGS
# ============================================

# Ollama API base URL
# ELOHIMOS_OLLAMA_BASE_URL=http://localhost:11434

# Ollama request timeout in seconds
# ELOHIMOS_OLLAMA_TIMEOUT=300

# GPU Offload (100 = full GPU offload for Apple Silicon)
# ELOHIMOS_OLLAMA_NUM_GPU_LAYERS=100

# Max context window size in tokens (max 200k for Claude-level context)
# ELOHIMOS_OLLAMA_NUM_CTX=200000

# Tokens per batch for GPU processing (higher = better GPU utilization)
# ELOHIMOS_OLLAMA_BATCH_SIZE=512

# Micro-batch size for GPU processing
# ELOHIMOS_OLLAMA_UBATCH_SIZE=128

# Use memory-mapped files (faster model loading)
# ELOHIMOS_OLLAMA_USE_MMAP=true

# Lock model in RAM (set True if you have enough RAM - 64GB+)
# ELOHIMOS_OLLAMA_USE_MLOCK=false

# Number of CPU threads (set to P-cores count, typically 8 for M-series)
# ELOHIMOS_OLLAMA_NUM_THREAD=8

# Performance mode: performance, balanced, or silent
# ELOHIMOS_OLLAMA_MODE=performance

# ============================================
# FILE UPLOAD SETTINGS
# ============================================

# Maximum file upload size in MB
# ELOHIMOS_MAX_FILE_SIZE_MB=1000

# Allowed file upload extensions (JSON array format)
# ELOHIMOS_ALLOWED_UPLOAD_EXTENSIONS=[".csv",".xlsx",".xls",".json",".parquet",".txt",".pdf",".png",".jpg",".jpeg"]

# Default chunk size for file processing
# ELOHIMOS_CHUNK_SIZE=10000

# ============================================
# RATE LIMITING
# ============================================

# Global rate limit (requests per time window)
# Format: <count>/<period> where period can be second, minute, hour, day
# ELOHIMOS_RATE_LIMIT_GLOBAL=100/minute

# Auth endpoint rate limit (stricter to prevent brute force)
# ELOHIMOS_RATE_LIMIT_AUTH=5/minute

# Chat endpoint rate limit
# ELOHIMOS_RATE_LIMIT_CHAT=20/minute

# ============================================
# AGENT/AI SETTINGS
# ============================================

# Agent operation timeout in seconds
# ELOHIMOS_AGENT_TIMEOUT=600

# Maximum iterations for agent reasoning loops
# ELOHIMOS_MAX_AGENT_ITERATIONS=10

# Default model for orchestrator (should be small/fast like qwen2.5:1.5b)
# ELOHIMOS_ORCHESTRATOR_MODEL=qwen2.5:1.5b

# ============================================
# EMBEDDINGS SETTINGS
# ============================================

# Default embedding model
# ELOHIMOS_EMBEDDING_MODEL=nomic-embed-text

# Embedding vector dimension
# ELOHIMOS_EMBEDDING_DIMENSION=768

# ============================================
# P2P MESH NETWORKING
# ============================================

# Enable P2P mesh networking features (experimental)
# ELOHIMOS_P2P_ENABLED=false

# P2P networking port
# ELOHIMOS_P2P_PORT=9000

# P2P discovery interval in seconds
# ELOHIMOS_P2P_DISCOVERY_INTERVAL=30

# ============================================
# PERFORMANCE SETTINGS
# ============================================

# Enable parallel processing for data operations
# ELOHIMOS_ENABLE_PARALLEL_PROCESSING=true

# Max worker threads (empty = CPU count, or specify a number)
# ELOHIMOS_MAX_WORKERS=

# Memory limit for data processing in MB
# ELOHIMOS_MEMORY_LIMIT_MB=4096

# ============================================
# BACKUP AND SYNC SETTINGS
# ============================================

# Enable automatic backups
# ELOHIMOS_BACKUP_ENABLED=false

# Backup interval in hours
# ELOHIMOS_BACKUP_INTERVAL_HOURS=24

# Backup retention in days
# ELOHIMOS_BACKUP_RETENTION_DAYS=30

# ============================================
# DEVELOPER SETTINGS
# ============================================

# Enable developer mode (bypass rate limits, extra logging)
# ⚠️  Never enable in production!
# ELOHIMOS_DEV_MODE=false

# Rate limit multiplier for dev mode (10x default)
# ELOHIMOS_DEV_RATE_LIMIT_MULTIPLIER=10

# ============================================
# DEPLOYMENT EXAMPLES
# ============================================

# Example 1: High-RAM Apple Silicon Developer Setup (M4 Max 128GB)
# ELOHIMOS_OLLAMA_USE_MLOCK=true
# ELOHIMOS_OLLAMA_NUM_CTX=200000
# ELOHIMOS_OLLAMA_NUM_GPU_LAYERS=100
# ELOHIMOS_OLLAMA_MODE=performance
# ELOHIMOS_DEV_MODE=true

# Example 2: Medium-RAM Production Setup (M1 Pro 32GB)
# ELOHIMOS_OLLAMA_USE_MLOCK=false
# ELOHIMOS_OLLAMA_NUM_CTX=128000
# ELOHIMOS_OLLAMA_NUM_GPU_LAYERS=100
# ELOHIMOS_OLLAMA_MODE=balanced
# ELOHIMOS_ENVIRONMENT=production
# ELOHIMOS_DEBUG=false
# ELOHIMOS_JWT_SECRET_KEY=<your-generated-secret>

# Example 3: Low-RAM Silent Mode (M1 Air 16GB)
# ELOHIMOS_OLLAMA_USE_MLOCK=false
# ELOHIMOS_OLLAMA_NUM_CTX=32000
# ELOHIMOS_OLLAMA_NUM_GPU_LAYERS=60
# ELOHIMOS_OLLAMA_MODE=silent
# ELOHIMOS_OLLAMA_BATCH_SIZE=256

# ============================================
# NOTES
# ============================================
#
# 1. Security:
#    - Always change JWT_SECRET_KEY in production
#    - Use environment-specific .env files (don't commit .env to git)
#    - Keep .env in .gitignore
#
# 2. Performance Tuning:
#    - For Apple Silicon: Use full GPU offload (NUM_GPU_LAYERS=100)
#    - Adjust NUM_CTX based on available RAM
#    - Use MLOCK only if you have 64GB+ RAM
#
# 3. Rate Limiting:
#    - Adjust based on your expected traffic
#    - Use DEV_MODE=true only in development
#
# 4. Backups:
#    - Enable BACKUP_ENABLED=true for production
#    - Adjust retention based on compliance needs
#
# 5. P2P Networking:
#    - Currently experimental, keep P2P_ENABLED=false unless testing
